+++
title = "0.76.0 Release Notes"
date = 2020-12-02
+++

Installation instructions:

- [Linux](/downloads/linux/) (or [Steam on Linux](/downloads/linux#steam))
- [Windows](/downloads/windows/)
- [macOS](/downloads/macos/)


## Table of Contents

- [1. Summary](#1-summary)
- [2. New Features in Detail](#2-new-features-in-detail)
- [3. Bugfixes](#3-bugfixes)
- [4. Known issues](#4-known-issues)
- [5. Removed features](#5-removed-features)
- [6. Notes for Developers](#7-notes-for-developers)
- [7. Changes merged from upstream projects](#8-changes-merged-from-upstream-projects)
- [8. Contributors](#9-contributors)


## 1. Summary

TODO

## 2. New Features in Detail

### Add new built-in GLSL shaders

Two high-quality CRT shaders are now bundled by default:

- `glshader = crt-easymode-flat` - for DOS games using resolutions 640x400
   or higher.
- `glshader = crt-fakelottes-flat` - for DOS games using smaller resolutions
   (e.g. 320x200).

[![Jazz Jacrabbit](/jazz-zoom.png)](/jazz-holiday.png)

*[Jazz Jackrabbit][jazz] (Holiday Hare 1995 Edition) - showcasing
`crt-fakelottes-flat`*.

[jazz]: https://www.pcgamingwiki.com/wiki/Jazz_Jackrabbit


### Improve --editconf, --printconf options

Sometimes it's hard to determine the location of `dosbox-staging.conf` file -
user might not know the location of config file or it might be affected by
certain OS settings.

These two options help user find/edit the file:

- `dosbox --editconf` - open the default .conf file in a text editor.

  This option respects `EDITOR` environment variable. If user did not select
preferred editor, then one of the following ones will be used:
`nano`, `vim`, `vi`, `notepad++.exe`, `notepad.exe`.

- `dosbox --printconf` - print .conf file path to the standard output.


### Add LS command

`ls` (list directory contents) Unix command is widely available across the
operating systems. Most users of modern OSes are likely to have it in their
muscle memory rather than ancient DOS `dir` command.

This is a very simple implementation, somewhat resembling the default operation
of GNU `ls`. It tries to fit as many directory entries on the screen as
possible and uses colour to clearly indicate directories and executable files.
Additionally, all files are displayed lowercase and all directories are
uppercase (Norton Commander style).

![example: dir /w /p](/dir_w_p_in_win311.png)
*Above: Windows 3.11 listed using `dir /w /p` - not enough space to show all
files, hard to distinguish between files and directories.*

*Below: The same directory listed using `ls` - more efficient utilization of
space in 80x25 DOS text mode, easier to read.*
![example: ls](/ls_in_win311.png)


### Rapid DC-offset correction for the emulated PC speaker

Audio speakers work by pushing and pulling their diaphram at a rate equal to the
audio's frequency.

Physical PC speakers can sometimes be left in a pushed-out or pulled-in state
through constant voltage, called DC-offset. DC offset in a real PC speaker
typically isn't a problem because it will remain silent in an offset state.

However in DOSBox, these ofsset audio samples are mixed with those from other
emulated audio devices, such as the Sound Blaster or Adlib, which can:

- cause a pop if the next sample played has a position signficantly
different from the position of the DC-offset

- harm accurate sound reproduction of other sound devices by moving
half the waveform further away from the center line (making it
louder) and the other half of the waveform closer to the center line
(making it quieter).

This new configuration option, `zero_offset` under the `[speaker]` section,
defaults to `'auto'`. It's enables for non-Windows systems and  disabled on
Windows as some of its audio drivers appear to attempt their own DC offset
correction.

For visuals and more detail about this change, see: [#480]

For a discussion about Windows 10 performing DC-offset correction,
see: [#625]

[#480]: https://github.com/dosbox-staging/dosbox-staging/pull/480
[#625]: https://github.com/dosbox-staging/dosbox-staging/pull/625


### Dynamic recompilation for PowerPC and POWER8 (ppc64le)

[Dynamic recompilation](https://en.wikipedia.org/wiki/Dynamic_recompilation)
support was extended to support PowerPC (32-bit) and POWER8 (64-bit)
architectures using community-developed patches (with slight improvements).

Shoutout to AmigaOS community for helping with thorough testing of
PowerPC support! :)


### Audio pop and click prevention

Some games generate audio pops or clicks during startup. We've added
two changes to reduce the occurance of these:

- Initial audio by all emulated devices is fed through a 15-ms envelope
  specifically timed to prevent unnatural electronic pops and clicks, yet fast
  enough to ensure that sharp-attack natural sounds (such as a symbol crash) are
  not affected.

  For visuals and detail about the enveloper, see: [#442]

- Some games test their interface to the Sound Blaster 16 using one or more
  small "junk" DMA transfers. Unfortunately on actual hardware, these result in
  startup clicks and pops, which can be jarring when using a headset.  We now
  suppress these initial junk transfers.

  For visuals and detail about DMA suppression, see: [#411]

[#411]: https://github.com/dosbox-staging/dosbox-staging/pull/411
[#442]: https://github.com/dosbox-staging/dosbox-staging/pull/442


### Gravis UltraSound (GUS) emulation improvements

*Using headphones is highly recommended!*

GUS emulator | Sample (FLAC)
--- | ---
Old implementation | <audio controls src="/rott_001_before.flac"> Your browser does not support the <code>audio</code> element.  </audio>
New implementation (with improvements) | <audio controls src="/rott_000_after.flac"> Your browser does not support the <code>audio</code> element.  </audio>

*Sample from [Rise of the Triad][rott] (1995). For other samples see: [link]*

Several changes have been made to the GUS emulation resulting in (sometimes)
audible difference, as follows:

- Output levels are now typically on-par with other audio devices.

- Panning of voices is now performed using constant-power, as described in the
  Gravis' SDK documentation. Constant-power panning was originally researched by
  the British Broadcasting Corporation (BBC) and found to produce the most
  realistic perception of voice placement on a radial axis from the listener.

- When quiting DOSBox Staging, information about the games' GUS audio stream
  will be provided, such as the breakdown of 8-bit versus 16-bit samples. A
  potential suggestion to adjust the game's GUS mixer level, either upward or
  downward may also be provided, which you could paste into your game's startup
  batch file or `[autoexec]` section.

We recommend using GUS emulation for the handful of DOS games that
[natively support](https://github.com/dosbox-staging/dosbox-staging/wiki/Gravis-Ultrasound-(GUS)#gus-native-games)
the GUS's multi-voice feature. For a list of these games, see:
[GUS Native games](https://github.com/dosbox-staging/dosbox-staging/wiki/CDDA-GUS-&-MIDI-compatible-games).

For more details about DOSBox Staging's GUS support and enhancements, see:
[GUS&nbsp;Enhancements](https://github.com/dosbox-staging/dosbox-staging/wiki/Gravis-UltraSound-Enhancements).

For information about constant-power panning, see pages 7 and 8:
[BBC R&D White Paper](http://downloads.bbc.co.uk/rd/pubs/whp/whp-pdf-files/WHP051.pdf).

[link]: https://github.com/dosbox-staging/dosbox-staging/wiki/Gravis-UltraSound-Enhancements#audio-comparisons
[rott]: https://www.pcgamingwiki.com/wiki/Rise_of_the_Triad

### Add an option for skipping the splash screen

The splash screen can now be skipped through a new configuration option called
`startup_verbosity` in the `[dosbox]` section.

- When set to `high`, the splash screen, blue help block, and any of dosbox's
  initial console output will be shown.

- When set to `medium`, the splash screen is skipped, but the blue help block
  and any of dosbox's initial console output will be shown.

- When set to `low`, the splash screen and blue help block will be skipped, but
  any of dosbox's initial console output will be shown.

- When set to `quiet`, all of the above will be skipped. The first output will
  either be the command prompt or output from startup executables.

By default, the verbosity it set to `auto`, which is equal to `low` when an
executable or directory is passed on the commandline. Otherwise `auto` is equal
to `high` when DOSBox Staging is started without initial commands.

For a visual depiction of the options, see: [#477]

[#477]: https://github.com/dosbox-staging/dosbox-staging/pull/477


### Revise help messages for mount and imgmount commands

These commands are usually thoroughly documented in the [manual], but having
usage examples at users fingertips is more convenient. Help can be invoked
by passing one of the following parameters: `/?` (DOS style), or `-h`, `--help`
(GNU style).

![example: mount help](/mount_help.png)

*Revised help messages provide usage examples, common parameter description,
and use limited set of colours to improve readability.*

[manual]: https://github.com/dosbox-staging/dosbox-staging/blob/master/README

Read more in: [#729](https://github.com/dosbox-staging/dosbox-staging/issues/729)


### Add integer scaling (pixel-perfect) option for OpenGL output

Integer scaling (AKA "Pixel Perfect mode) is now also available via OpenGL.

You can test integer scaling by changing `output` option:

- `output = openglpp` - OpenGL + integer scaling. This option is used to provide
  backwards compatibility with other DOSBox forks.
- `output = texturepp` - SDL2 texture backend + integer scaling. This option
  was added in 0.75.0.

These two options behave pretty much the same, except Linux users can enjoy
resizable window with `output = openglpp`.

Examples running fullscreen on 1080p display:

[![The Lost Vikings][vikings]][vikings]

*[The Lost Vikings](https://www.pcgamingwiki.com/wiki/The_Lost_Vikings) (1993)
with integer scaling.*

[![Epic Pinball][epic-pinball]][epic-pinball]

*[Epic Pinball](https://www.pcgamingwiki.com/wiki/Epic_Pinball) (1993)
with integer scaling.*

*Tip: integer scaling works best for games, that use square pixels; many DOS
games use non-square pixels (often using resolution 320x200 / [PAR] 5:6) - for
those titles sharp&#8209;bilinear scaling (DOSBox Staging default setting) works
better.*

*This video essay by Displaced Gamers provides great explanation:
[DOS Gaming Aspect Ratio - 320x200](https://www.youtube.com/watch?v=YvckyWxHAIw)*

[PAR]: https://en.wikipedia.org/wiki/Pixel_aspect_ratio
[vikings]: /the-lost-vikings-4x4.png
[epic-pinball]: /epic-pinball-4x4.png

`output=openglpp` option with `windowresolution=resizable` is also a good choice
for using DOS applications in text mode, giving very sharp text (but sacrificing
proper DOS font aspect ratio):

[![Turbo Pascal used in window mode](/desktop-turbo-openglpp-min.png)](/desktop-turbo-openglpp.png)


### Add Built-in MIDI support via FluidSynth

TODO: caveat about lack support in Linux tarball package and document all
other implemented options

We've integrated FluidSynth 2.x, a powerful and accurate MIDI synthesizer, to
directly support MIDI playback. This means you no longer need to use an external
MIDI synthesizer such the Roland Sound Canvas VA or BassMidi on Windows, or
TiMidity++ or QSynth on Linux.

Configure your game to use General MIDI (GM) output on port 330 and update your
DOSBOX Staging config as follows to start using it:

``` ini
[midi]
mpu401     = intelligent
mididevice = fluidsynth

[fluidsynth]
soundfont = /path/to/soundfont.sf2
```

#### Fine Grained MIDI Level Controls

Some SoundFonts can be "louder" than others, such as [Timbres of Heaven][toh].
You can provide an optional level-scalar percentage after the SF2 filename, such
as: `soundfont = /path/to/timbres_of_heaven.sf2 20`, which in this case will
reduce the SoundFont's levels to 20% of their original output.

Most games that play MIDI music provide an in-game volume adjustment, however,
some games may not save your setting while some games may not even allow this
adjustment. For these games, use the `mixer FSYNTH` command to set your desired
MIDI output level either in your startup batch file or the `[autoexec]` section
in the game's config file.

[toh]: http://midkar.com/soundfonts/

### Improve Telnet-mode handling for Modem emulation

For those hosting a BBS behind a Telnet interface, you can now pre-configure
your serial port in Telnet-mode with the `telnet:1` argument, as follows:

``` ini
[serial]
serial1 = modem telnet:1 listenport:2323
```

For those dialing BBSs hosted behind a Telnet interface, use the following
dial-prefix: `AT+NET1DT`. In general, the `+NET1` or `+NET0` AT-command will
enable or disable Telnet-mode, respectively.

This change bring Telnet-mode in-line with the Hayes multi-character command
specification, which should be compatible with existing BBS software.

For more background about this change, see: [#582]

[#582]: https://github.com/dosbox-staging/dosbox-staging/pull/582


### Fix setting file timestamp

DOS function [5701h "Set File Time/Date"][5701h] was implemented.

This corrects long-standing emulation issue when it comes to date handling of
files created in DOS (e.g. when files are being unpacked from an archive).
This fixes some game installers and other software that checks file modification
times.

[5701h]: https://dos4gw.org/DOS_Fn_5701H_Set_File_Time_Date


### Case-insensitive paths handling

Paths passed to commands `mount`, `imgmount`, and audio track paths in
`.cue` and `.ins` files are now treated as case-insensitive, regardless
of operating system.

*Fixes numerous issues with running DOS games on Linux or FreeBSD.
This change alone corrects the vast majority of Windows-only DOS game releases
on [GOG] or [Steam][steam-curator] (such as e.g. Settlers II, Redneck Rampage,
or Mortal Kombat series) - users no longer need to manually adjust the paths
after unpacking games from Windows installer. This should significantly
improve quality of [Lutris] installers as well.*

[gog]: https://www.gog.com/games?sort=release_asc&page=1
[steam-curator]: https://store.steampowered.com/curator/35328265-Powered-by-DOSBox/
[Lutris]: https://lutris.net/


### Revise default keyboard shortcuts

The default keyboard shortcuts were revised to avoid conflicts with
OS default shortcuts and replace actions, that were not useful to
normal users.

The list of new new default shortcuts are:

- **Alt-Enter** - Switch between fullscreen and window mode.
- **Alt-Pause** - Pause/Unpause emulator.
- **Ctrl-F1** - Start the keymapper.
- **Ctrl-F4** - Change between mounted floppy/CD images.
- **Ctrl-F5** - Save a screenshot.
- **Ctrl-F6** - Start/Stop recording sound output to a wave file.
- **Ctrl-F7** - Start/Stop recording video output to a zmbv file.
- **Ctrl-F9** - Shutdown emulator.
- **Ctrl-F10** - Capture/Release the mouse.
- **Ctrl-F11** - Slow down emulation.
- **Ctrl-F12** - Speed up emulation.
- **Ctrl-Alt-Home** - Restart emulator.
- hold **Alt-F12** - Fast forward.

Keymapper received tiny usabity improvements as well: it displays
keyboard shortcut (binding) for selected action.


### Monochrome palette colour setting

When emulating monochrome displays (Hercules or CGA/monochrome), the default
colour palette can now be selected in the configuration file.

*This feature was backported to 0.75.2 release;
[read more](/v0-75-2/#2-1-select-monochrome-palette-colour).*


### Raw mouse input setting

User can now bypass the operating system's mouse acceleration and sensitivity
settings. This works in fullscreen or when the mouse is captured in window mode.

*This feature was backported to 0.75.2 release;
[read more](/v0-75-2/#2-2-raw-mouse-input).*


### 10-axis controller support

Old joysticks compatible with DOS games can be emulated using modern 10-axis
controllers (like DualShock or Xbox controllers).

*This feature was backported to 0.75.1 release;
[read more](/v0-75-1/#2-1-add-support-for-binding-more-controller-axes).*


### Log memory base address

Base memory address of DOS's emulated memory region is now logged to the
console to help some users of external software.

*This feature was backported to 0.75.1 release;
[read more](/v0-75-1/#2-3-log-base-address-of-emulated-memory).*


## 3. Bugfixes

Some notable bugfixes:

- Prevent SDL2 crash on exit when using Wayland. ([#336])
- Fix sound effects in Prince of Persia on Tandy. ([#457])
- Prevent crash on SDL2 re-creating OpenGL window. ([#510])
- Fix `dir /p` in non-standard text modes. ([#528])
- Prevent injection of spurious newlines in autoexec and bat files. ([#536])
- Fix `caputure_mouse` `middlegame` setting. ([#563])
- Fix a CD-DA roll-over bug when calculating PCM frames. ([#569])
- Fix boot failure from image mounted as C:. ([#589])
- Fix memory leak in modem phone book. ([#622])
- Fix `cls` command. ([#639])
- Increase default DOS file limit for emulation of program Subiekt 4. ([#656])
- Fix Pentium CPUID to indicate CPU without FDIV bug. ([#694])
- (from SVN) Multiple bugfixes and regression fixes for various games or demoscene
  productions, such as
  [Clue: Master Detective](https://www.mobygames.com/game/dos/clue-master-detective)
  (1989), ([8c002]),
  [Pleasure'n Pain](https://demozoo.org/productions/102239/) demo
  ([8c07c], [e9a67]), MayDay demo ([b6e77]), PC Tools 9, and others.
- (from SVN) Set Precision Exception in `FRNDINT` (Round to Integer instruction),
   to avoid bug when running Borland Pascal `pow` implementation. ([7892b])

[#336]: https://github.com/dosbox-staging/dosbox-staging/issues/336
[#457]: https://github.com/dosbox-staging/dosbox-staging/pull/457
[#510]: https://github.com/dosbox-staging/dosbox-staging/pull/510
[#528]: https://github.com/dosbox-staging/dosbox-staging/pull/528
[#536]: https://github.com/dosbox-staging/dosbox-staging/pull/536
[#563]: https://github.com/dosbox-staging/dosbox-staging/pull/563
[#569]: https://github.com/dosbox-staging/dosbox-staging/pull/569
[#589]: https://github.com/dosbox-staging/dosbox-staging/pull/589
[#622]: https://github.com/dosbox-staging/dosbox-staging/pull/622
[#639]: https://github.com/dosbox-staging/dosbox-staging/pull/639
[#656]: https://github.com/dosbox-staging/dosbox-staging/issues/656
[#694]: https://github.com/dosbox-staging/dosbox-staging/pull/694
[8c002]: https://github.com/dosbox-staging/dosbox-staging/commit/8c0021ab2a0ae56a413e12816c0cb8a472f36cd0
[8c07c]: https://github.com/dosbox-staging/dosbox-staging/commit/8c07c9bcae56dfff9602995aad39708d1c8c975a
[e9a67]: https://github.com/dosbox-staging/dosbox-staging/commit/e9a67fcaa73dcdc66d6ab2477821d3ddc2034fbf
[b6e77]: https://github.com/dosbox-staging/dosbox-staging/commit/b6e7718ebc6cd93498f4b4505bc2e5be6f09edcb
[7892b]: https://github.com/dosbox-staging/dosbox-staging/commit/7892be26c72f812c0f58d17524516370fbde9bd6


## 4. Known issues

- The W^X memory protection (enabled by default via e.g. SELinux) prevents
  dynamic recompiler from working. See: [#253]
- Keymapper has problems with mapping multiple axis when multiple controllers
  are plugged in (e.g. notably when using modern joysticks and throttles
  connected at the same time). See: [#342]
- GLSL shader implementation crashes on certain Intel GPUs on Arch. See: [#319]
- Mapping key scancodes on X11 using `xmodmap` can break SDL2 ability to
  detect your keyboard layout and leave you with non-fuctional keyboard input.
  Use udev to instead of xmodmap to prevent this problem.

[#253]: https://github.com/dosbox-staging/dosbox-staging/issues/253
[#319]: https://github.com/dosbox-staging/dosbox-staging/issues/319
[#342]: https://github.com/dosbox-staging/dosbox-staging/issues/342


## 5. Removed features

- Option `gusrate` in `[gus]` section was removed. Revised Gravis UltraSound
  emulation implementation made this option obsolete.
- Option `oplrate` in `[sblaster]` section was removed. This value is now
  automatically tied to `rate` in `[mixer]` section (so users do not need to manually
  correlate values for these two options any more).


## 6. Notes for Developers

- Project switched to using C++14.
- We introduced [unit tests][UT] (using Google Test framework). As for now unit
  tests are running on Linux only - to build them use `--enable-tests`
  configure flag and `make test` to run them. They are included in CI gating.
- Windows x64 builds were added to Visual Studio solution (both Debug and
  Release profiles).
- CI was extended with gating based on MSVC (32-bit and 64-bit builds)
- Due to instability and extremely slow installation times MSYS2 was
  removed from gating CI. It is still included in our daily builds, but we do
  not recommend using MSYS2 for development.
- Linux builds for ARMv6, ARMv7, ARMv8 (AArch64), ppc64le, and s390x
  architectures were added to our set of daily builds.
- We fixed all `-Wall -Weffc++` warnings on Linux and macOS and corrected
  large number of issues detected via static and dynamic code analysis tools.

![warnings graph](/dosbox-staging-warnings-nov-2020.png)

*When the project started we inherited 1411 warnings from DOSBox; as of
November 2020 the builds are finally clean, so it's easier to make sure
we do not introduce new warnings :).*

[UT]: https://en.wikipedia.org/wiki/Unit_testing

## 7. Changes merged from upstream projects

- Merge DOSBox SVN changes up to revision 4392
- Sync dr_mp3 v0.6.11 from upstream
- Sync dr_flac v0.12.13 from upstream
- Sync dr_wav v0.12.4 from upstream
- Sync xxhash 0.8.0 from upsteam
- Sync stb header v2.36 from upstream
- Sync stb_vorbis v1.19 from upstream


## 8. Contributors

During DOSBox Staging 0.76 development period we merged **1003** commits,
including **55** commits originating from the DOSBox project.

**DOSBox Staging Maintainers:**

Patryk Obara, kcgen, nemo93

**DOSBox Staging Contributors:**

Affonso Amendola,
Bernard Cafarelli,
cfoesch,
ClassicHasClass,
David Heidelberg,
drfiemost,
Edward Betts,
Erlotinib,
Expack3,
Feignint,
Jonathan Campbell,
MasterO2,
NicknineTheEagle,
Nikos Chantziaras,
Robert de Rooy,
Troy Campbell,
Tyrell Sassen,
Vladimir Serbinenko,
Wengier

**DOSBox Contributors (SVN r4336:r4392):**

Harekiet, jmarsh, Jonathan Campbell, NewRisingSun, Qbix, ripsaw8080

*We are extremely grateful for all contributions, including the invaluable
improvements merged in from the DOSBox project. Thank you!*
